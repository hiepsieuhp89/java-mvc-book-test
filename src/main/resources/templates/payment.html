<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="layout/main :: head('Thanh toán')">
    <!-- Nội dung này sẽ bị thay thế bởi fragment head -->
</head>

<body>
    <div th:replace="layout/main :: body(content=~{::div.content})">
        <div class="content">
            <div class="container my-5">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card shadow-sm border-0" style="border-radius: 12px;">
                            <div class="card-header main-color text-white text-center py-3">
                                <h4 class="mb-0">Thanh toán</h4>
                            </div>
                            <div class="card-body p-4">
                                <!-- Thông tin đơn hàng -->
                                <div class="order-summary mb-4">
                                    <h5 class="card-title mb-3">Thông tin đơn hàng</h5>
                                    <div class="card bg-light mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Sản phẩm:</span>
                                                <span>Thuê sách "Đắc Nhân Tâm"</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Thời gian thuê:</span>
                                                <span>7 ngày</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Phí thuê:</span>
                                                <span>35.000đ</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Phí vận chuyển:</span>
                                                <span>Miễn phí</span>
                                            </div>
                                            <hr>
                                            <div class="d-flex justify-content-between fw-bold">
                                                <span>Tổng thanh toán:</span>
                                                <span>35.000đ</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Phương thức thanh toán -->
                                <div class="payment-method mb-4">
                                    <h5 class="card-title mb-3">Phương thức thanh toán</h5>
                                    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="pills-card-tab" data-bs-toggle="pill" data-bs-target="#pills-card" type="button" role="tab" aria-controls="pills-card" aria-selected="true">Thẻ tín dụng</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="pills-bank-tab" data-bs-toggle="pill" data-bs-target="#pills-bank" type="button" role="tab" aria-controls="pills-bank" aria-selected="false">Chuyển khoản</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="pills-cash-tab" data-bs-toggle="pill" data-bs-target="#pills-cash" type="button" role="tab" aria-controls="pills-cash" aria-selected="false">Tiền mặt</button>
                                        </li>
                                    </ul>
                                    <div class="tab-content" id="pills-tabContent">
                                        <!-- Thanh toán thẻ tín dụng -->
                                        <div class="tab-pane fade show active" id="pills-card" role="tabpanel" aria-labelledby="pills-card-tab">
                                            <form id="payment-form">
                                                <div class="mb-3">
                                                    <label for="cardName" class="form-label">Tên chủ thẻ</label>
                                                    <input type="text" class="form-control" id="cardName" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="cardNumber" class="form-label">Số thẻ</label>
                                                    <input type="text" class="form-control" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" required>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <label for="expDate" class="form-label">Ngày hết hạn</label>
                                                        <input type="text" class="form-control" id="expDate" placeholder="MM/YY" required>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <label for="cvv" class="form-label">CVV</label>
                                                        <input type="text" class="form-control" id="cvv" placeholder="123" required>
                                                    </div>
                                                </div>
                                                <div class="mb-3 form-check">
                                                    <input type="checkbox" class="form-check-input" id="saveCard">
                                                    <label class="form-check-label" for="saveCard">Lưu thông tin thẻ cho lần sau</label>
                                                </div>
                                                <button type="submit" class="btn main-color text-white w-100">Thanh toán ngay</button>
                                            </form>
                                        </div>
                                        
                                        <!-- Thanh toán chuyển khoản -->
                                        <div class="tab-pane fade" id="pills-bank" role="tabpanel" aria-labelledby="pills-bank-tab">
                                            <div class="alert alert-info">
                                                <p class="mb-2"><strong>Vui lòng chuyển khoản theo thông tin sau:</strong></p>
                                                <p class="mb-1">Ngân hàng: Vietcombank</p>
                                                <p class="mb-1">Số tài khoản: 1234567890</p>
                                                <p class="mb-1">Chủ tài khoản: CÔNG TY TNHH SÁCH HAY</p>
                                                <p class="mb-1">Nội dung: <strong>THUÊ SÁCH Đắc Nhân Tâm - [họ tên của bạn]</strong></p>
                                            </div>
                                            <div class="mb-3">
                                                <label for="transferProof" class="form-label">Đính kèm biên lai chuyển khoản</label>
                                                <input class="form-control" type="file" id="transferProof">
                                            </div>
                                            <button type="button" class="btn main-color text-white w-100">Xác nhận đã chuyển khoản</button>
                                        </div>
                                        
                                        <!-- Thanh toán tiền mặt -->
                                        <div class="tab-pane fade" id="pills-cash" role="tabpanel" aria-labelledby="pills-cash-tab">
                                            <div class="alert alert-warning">
                                                <p>Bạn sẽ thanh toán bằng tiền mặt khi nhận sách. Phí vận chuyển sẽ được thu thêm tùy theo khu vực.</p>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryAddress" class="form-label">Địa chỉ nhận sách</label>
                                                <textarea class="form-control" id="deliveryAddress" rows="3" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="phoneNumber" class="form-label">Số điện thoại</label>
                                                <input type="tel" class="form-control" id="phoneNumber" required>
                                            </div>
                                            <button type="button" class="btn main-color text-white w-100">Đặt hàng</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Lưu ý pháp lý -->
                                <div class="legal-notice">
                                    <p class="text-muted small">Bằng việc tiến hành thanh toán, bạn đồng ý với <a href="#">Điều khoản dịch vụ</a> và <a href="#">Chính sách bảo mật</a> của chúng tôi.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quay lại -->
                        <div class="text-center mt-3">
                            <a href="javascript:history.back()" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i> Quay lại
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Script for card payment processing -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const paymentForm = document.getElementById('payment-form');
            if (paymentForm) {
                paymentForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    
                    // Normally, this would integrate with Stripe or another payment processor
                    // For this demo, we'll simulate a successful payment
                    
                    alert('Thanh toán thành công! Cảm ơn bạn đã sử dụng dịch vụ của chúng tôi.');
                    window.location.href = '/payment/history?success=true';
                });
            }
        });
    </script>
</body>

</html> 